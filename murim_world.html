<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BioLog Terminal v5.0</title>
  <link rel="icon" href="website_logo.ico" type="image/x-icon">
<!-- ‚úÖ Status Window Overlay -->
<div id="profileOverlay" class="fullOverlay hidden">
  <div class="panel status-window">
    <h2 class="status-title">Character Profile</h2>
    <div class="profileTabs">
      <button onclick="showProfileTab('clan')" class="tab-button">üèØ Clan</button>
      <button onclick="showProfileTab('race')" class="tab-button">üß¨ Race</button>
      <button onclick="showProfileTab('teacher')" class="tab-button">üìú Teacher</button>
    </div>

    <div id="profileContent" class="profileSection">
      <!-- Dynamically filled -->
    </div>

    <button onclick="closePanel('profile')" class="close-button">‚úñ Close</button>
  </div>
</div>
  <style>
    .hidden {
      display: none !important;
    }
    :root {
      --bg: #000; --fg: #0f0;
      --panel-bg: #111; --btn-bg: #111;
      --btn-hover: #222; --border: #0f0;
    }
    .light-theme {
      --bg: #fff; --fg: #000;
      --panel-bg: #f4f4f4; --btn-bg: #eee;
      --btn-hover: #ddd; --border: #000;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 0;
      background: var(--bg); color: var(--fg);
      font-family: monospace;
      display: flex; flex-direction: column;
      min-height: 100vh;
    }
    #main {
      flex: 1;
      display: grid;
      grid-template-columns: 1fr 300px;
      grid-gap: 20px;
      width: 90%; max-width: 1000px;
      margin: 20px auto;
    }
    #profileOverlay .panel {
      background: var(--bg);
      color: var(--fg);
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      max-width: 600px;
      margin: 40px auto;
      text-align: left;
    }
    .profileTabs button {
      margin-right: 10px;
      margin-bottom: 10px;
    }
    .profileSection img {
      max-width: 100px;
      float: right;
      margin-left: 20px;
      border-radius: 8px;
    }
    .profileTrait {
      background: rgba(255,255,255,0.05);
      padding: 5px 10px;
      margin: 5px 0;
      border-left: 4px solid var(--accent);
    }
    h2 {
      grid-column: 1 / -1;
      text-align: center; font-size: 2em;
      margin: 0 0 10px;
    }
    .panel {
      background: var(--panel-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 15px;
    }
    .panel p, .panel strong {
      font-size: 1.1em; margin: 8px 0;
    }
    button {
      background: var(--btn-bg); color: var(--fg);
      border: 1px solid var(--border);
      padding: 10px 20px; margin: 5px;
      font-size: 1em; border-radius: 4px;
      cursor: pointer;
    }
    button:hover { background: var(--btn-hover); }
    #portrait img {
      width: 100%; max-width: 250px;
      border: 1px solid var(--border);
      border-radius: 6px; margin-bottom: 10px;
    }
    #portraitAnimated {
      width: 200px;
      height: 200px;
      margin: auto;
      background: url('dormant_person.png') no-repeat center/cover;
      box-shadow: 0 0 20px 2px rgb(92, 156, 92);
      animation: pulseBG 3s infinite ease-in-out;
    }
    @keyframes pulseBG {
      0%, 100% { box-shadow: 0 0 10px limegreen; }
      50% { box-shadow: 0 0 30px lime; }
    }
    #overlayBackdrop {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.8);
      z-index: 999;
      display: none;
    }

    #menuOverlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.85);
      display: flex;           /* so flex children center properly */
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }
    .menuPanel {
      background: var(--panel-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 20px;
      width: 90%;
      max-width: 800px;
    }
    .menuNav button {
      margin: 4px;
    }
    .menuContent {
      margin-top: 20px;
    }
    .menuContent ul {
      list-style: none;
      padding: 0;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }

    .menuContent li {
      width: 100px;
      text-align: center;
    }

    .menuContent li img {
      width: 64px;
      height: 64px;
      object-fit: contain;
      border: 1px solid var(--border);
      border-radius: 4px;
      display: block;
      margin: 0 auto 6px;
    }

    .menuContent li button {
      margin-top: 4px;
      font-size: 0.9em;
      padding: 4px 8px;
    }

    .fullOverlay {
      position: fixed; top:0; left:0; right:0; bottom:0;
      display: flex; align-items: center; justify-content: center;
      background: rgba(0,0,0,0.85);
      z-index: 10000;
    }

    .fullOverlay .panel { background: var(--panel-bg); padding:20px; border:1px solid var(--border); }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, 80px);
      gap: 12px;
      margin-top: 1em;
    }
    .grid .tile {
      cursor: pointer;
      text-align: center;
    }
    .grid .tile img {
      width: 64px;
      height: 64px;
      border: 1px solid var(--border);
      border-radius: 4px;
    }
    .grid .tile div {
      margin-top: 4px;
      font-size: 0.85em;
    }
    #battleCanvas {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 10000;
      display: block; /* we‚Äôll toggle .hidden on/off */
    }

    /* Footer buttons */
    #footer {
      display: flex; justify-content: center;
      padding: 10px; background: var(--panel-bg);
      border-top: 1px solid var(--border);
    }
    #footer button { margin: 0 10px; }
  </style>
</head>
<body>
  <div id="main">
    <canvas
      id="battleCanvas"
      class="hidden"
      style="position:fixed;top:0;left:0;width:100%;height:100%;z-index:10000;"
    ></canvas>

    <h2>BioLog Terminal Interface v5.0</h2>

    <!-- Left Column -->
  <div id="leftColumn">
    <div class="panel">
      <p><strong>Race:</strong> <span id="race">‚Äì</span></p>
      <p><strong>Clan:</strong> <span id="clan">‚Äì</span></p>
      <p><strong>Potential: √ó</strong><span id="potential">1</span></p>
    </div>

    <div class="panel">
      <p><strong>Realm:</strong> <span id="realm">Body Tempering</span></p>
      <p><strong>Benefit:</strong> <span id="benefit">‚Äì</span></p>
    </div>

    <div class="panel">
      <p><strong>Title:</strong> 
        <span id="mainEquippedTitle">-</span></p>
      <p><strong>Weapon:</strong>
        <span id="mainEquippedWeapon">-</span></p>
      <p><strong>Technique:</strong>
        <span id="mainEquippedTechnique">-</span></p>
    </div>

    <div class="panel">
      <p><strong>HP:</strong> <span id="hp">100</span>/<span id="maxHp">100</span></p>
      <p><strong>Qi:</strong> <span id="qi">0</span></p>
      <p><strong>Str:</strong> <span id="str">0</span></p>
      <p><strong>Vit:</strong> <span id="vit">5</span></p>
      <p><strong>Wis:</strong> <span id="wis">5</span></p>
      <p><strong>Luck:</strong> <span id="luck">2</span></p>
      <p><strong>Spi:</strong> <span id="spi">5</span></p>
    </div>
  </div> <!-- ‚úÖ closes the whole Left Column -->

    <!-- Right Column -->
    <div id="portrait">
      <!-- animated portrait div -->
      <div id="portraitAnimated"></div>
      <!-- old image as a fallback (visually hidden) -->
      <img src="dormant_person.png" alt="" style="display:none">
      <div>
        <button onclick="meditate()">Meditate</button>
        <button onclick="train()">Train</button>
        <button onclick="breakthrough()">Breakthrough</button>
        <button onclick="enterFight()">Fight</button>
      </div>
    </div>
  </div>

  <!-- SMALL MENU POPUP -->
  <div id="menuOverlay" class="hidden">
    <div class="menuPanel">
      <div class="menuNav">
        <button onclick="openCategory('technique')">üåÄ Techniques</button>
        <button onclick="openCategory('weapon')">‚öîÔ∏è Weapons</button>
        <button onclick="openCategory('title')">üéó Titles</button>
        <button onclick="openCategory('profile')">üß¨ Profile</button>
        <button onclick="closeMenu()">‚ùå Close</button>
      </div>
    </div>
  </div>

  <!-- full‚Äëscreen Techniques panel -->
<!-- Techniques Overlay -->
<div id="techniquesOverlay" class="fullOverlay hidden">
  <div class="panel">
    <h2>Techniques</h2>
    <div class="grid" id="techniquesGrid"></div>
    <button onclick="closePanel('techniques')">Close</button>
  </div>
</div>

<!-- Weapons Overlay -->
<div id="weaponsOverlay" class="fullOverlay hidden">
  <div class="panel">
    <h2>Weapons</h2>
    <div class="grid" id="weaponsGrid"></div>
    <button onclick="closePanel('weapons')">Close</button>
  </div>
</div>

<!-- Titles Overlay -->
<div id="titlesOverlay" class="fullOverlay hidden">
  <div class="panel">
    <h2>Titles</h2>
    <div class="grid" id="titlesGrid"></div>
    <button onclick="closePanel('titles')">Close</button>
  </div>
</div>

    <!-- Footer: Stats, Theme, Admin, Export/Import -->
  <div id="footer">
    <button onclick="toggleMenu()">Menu</button>
    <button id="themeToggle">Switch Theme</button>
    <button onclick="toggleAdmin()">Admin</button>
    <button onclick="exportSave()">Export Config</button>
    <button onclick="importSave()">Import Config</button>
  </div>
  <textarea id="configData"
            placeholder="Paste your exported Data here"
            style="width:90%; max-width:600px; height:60px;
                   margin:10px auto; display:block;">
  </textarea>

</div>
<script>
let data = {
  // Core stats
  qi: 0,
  str: 0,
  vit: 5,
  wis: 5,
  luck: 5,
  spi: 5,

  // Derived stats
  hp: 100,
  maxHp: 100,
  baseHp: 50,
  baseQiGain: 1,

  // Identity & Equipment
  race: "-",
  clan: "-",
  teacher: "-",             // New equipped teacher
  potential: 1,
  title: "-",

  // Buffs & Multipliers
  titleQiBuff: 1,
  titleStrBuff: 1,
  realmQiBuff: 1,
  realmStrBuff: 1,
  raceQiBuff: 1,
  raceStrBuff: 1,
  clanLootBuff: 1,
  clanStrBuff: 1,
  clanWisBuff: 1,
  clanSpiBuff: 1,

  // Progression
  realmIndex: 0,
  subLevel: 1,
  inFight: false,
  meditating: false,
  training: false,

  // Inventories & Unlocks
  weapons: 
    [{name:"Rusty Sword", weaponDurability: 100}, 
    {name: "Iron Axe", weaponDurability: 110}],

  titles: 
    [{name: "Unyielding Spirit", resistanceChance: 5},
    {name: "Qi Master", qiGain: 1.2}],

  unlockedTitles: [],
  unlockedWeapons: [],
  unlockedTechniques: [],

  // Equipped pointers
  equippedTitle: "-",
  equippedWeapon: "-",
  equippedTechnique: "-",
  equippedTeacher: "-",      // display-friendly pointer

  // Achievements
  achievements: {},

  // Admin
  unlimitedSpins: false,
};

function rollPotential(grade) {
  // If player is in admin mode, always roll as divine
  if (data.unlimitedSpins) {
    grade = 'divine';
  }

  let min = 1;
  let max = 100;

  switch (grade) {
    case 'lesser':      // Flickering Fate Pill
      min = 1;
      max = 40;
      break;
    case 'normal':      // Fate-Altering Pill
      min = 30;
      max = 75;
      break;
    case 'divine':      // Destiny Severing Pill
      min = 70;
      max = 100;
      break;
    default:
      console.warn("Unknown grade passed to rollPotential()");
      break;
  }

  data.potential = Math.floor(Math.random() * (max - min + 1)) + min;
  updateUI();
  return data.potential;
}

if (!data.achievements) data.achievements = {};
if (typeof data.sparsWon !== 'number') data.sparsWon = 0;

// Races and clans and teachers
const races = {
  // ========== LOW-CLASS ==========
  "Human": {
    class: "Low",
    tooltip: "Balanced but lacks specialization.",
    traits: ["Versatile Learner: +10% technique XP", "No elemental affinity"],
    versatileLearner: true
  },

  "Dwarf": {
    class: "Low",
    tooltip: "+15% weapon durability, -10% Qi gain. Resistant to stun.",
    traits: ["Sturdy Build: +15% weapon durability", "Stun Resistance"],
    weaponDurability: 1.15,
    qiGain: 0.9,
    resistStun: true
  },

  "Orc": {
    class: "Low",
    tooltip: "+20% STR, -20% wisdom. High HP but can't meditate.",
    traits: ["Brute Force", "Meditation Blocked"],
    strGain: 1.2,
    wisGain: 0.8,
    canMeditate: false
  },

  // ========== MID-CLASS ==========
  "Beastkin": {
    class: "Mid",
    tooltip: "High HP, gains Rage at low HP. Slower Qi gain.",
    traits: ["Beast Rage: +25% damage under 30% HP"],
    rageBoost: 1.25,
    qiGain: 0.9,
  },

  "Sylvan": {
    class: "Mid",
    tooltip: "Faster healing during meditation, +10% loot chance. -5% STR.",
    traits: ["Natural Harmony", "Forest‚Äôs Blessing"],
    meditateHeal: 1.5,
    lootBonus: 1.1,
    strPenalty: 0.95
  },

  "Shadeborn": {
    class: "Mid",
    tooltip: "Stealth duration +25%, illusion resistance. Fragile HP.",
    traits: ["Shadow Fade", "Mind Shield"],
    stealthDuration: 1.25,
    immuneIllusion: true,
    vitGain: 0.9
  },

  // ========== HIGH-CLASS ==========
  "Dragonkin": {
    class: "High",
    tooltip: "+20% STR technique damage, -Qi regen.",
    traits: ["Draconic Might", "Slow Qi Flow"],
    strTechBoost: 1.2,
    qiGain: 0.8
  },

  "Voidborn": {
    class: "High",
    tooltip: "Ignores 15% of Qi shields. Immune to illusions.",
    traits: ["Void Pulse", "Mind Clarity"],
    ignoreQiShields: 0.15,
    immuneIllusion: true
  },

  "Celestial": {
    class: "High",
    tooltip: "+10% to all stats. Immune to status effects.",
    traits: ["Divine Balance", "Status Immunity"],
    universalStatGain: 1.2,
    immuneStatus: true
  }
};

const clans = {
  // ========== LOW-CLASS ==========
  "Hall of Echoes": {
    class: "Low",
    tooltip: "+30% Qi gain while meditating, +10% base HP",
    traits: ["Echo Breathing: Increased Qi gain while meditating"],
    baseQiGain: 1.3,
    baseHp: 55
  },

  "Dust Path": {
    class: "Low",
    tooltip: "+15% movement speed, -5% STR gain",
    traits: ["Wanderer's Agility", "Weakened Roots"],
    moveSpeed: 1.15,
    str: 0.95
  },

  "Wild Claw": {
    class: "Low",
    tooltip: "+10% beast damage, -10% item drop chance",
    traits: ["Savage Heritage", "Loot Blindness"],
    beastDmg: 1.1,
    dropRate: 0.9
  },

  // ========== MID-CLASS ==========
  "Jade Root": {
    class: "Mid",
    tooltip: "+20% loot quality",
    traits: ["Treasure Sense"],
    loot: 1.2
  },

  "Ice Vein": {
    class: "Mid",
    tooltip: "+50% STR gain",
    traits: ["Frozen Will: Strength grows faster in harsh conditions"],
    str: 1.5
  },

  "Thunder Fang": {
    class: "Mid",
    tooltip: "+25% STR gain, +10% attack speed",
    traits: ["Lightning Body", "Battle Hunger"],
    str: 1.25,
    atkSpeed: 1.1
  },

  // ========== HIGH-CLASS ==========
  "Sun Clan": {
    class: "High",
    tooltip: "+20% wisdom gain, +50% spirit gain",
    traits: ["Solar Enlightenment", "Spiritual Pulse"],
    wis: 1.2,
    spi: 1.5
  },

  "Voidspire": {
    class: "High",
    tooltip: "Gain Qi faster when fighting, immune to Qi drain effects",
    traits: ["Void Surge", "Qi Nullification"],
    combatQiRegen: 1.4,
    immuneQiDrain: true
  },

  "Golden Sky Sect": {
    class: "High",
    tooltip: "+10% potential, +10% training XP gain",
    traits: ["Heavenly Guidance", "Lineage of Genius"],
    potential: 1.1,
    trainingXp: 1.1
  }
};


const teachers = {
  "Mr. Lu Chan": {
  tooltip: "Ten Verses of Crimson Scripture: Bloodline Blade Doctrine",
  description: "Blood Scripture Blade Style",
  styleType: "Forbidden / Blood Magic",
  signatureMove: "Verse IV: Blade of Ancestral Woe",
  element: "Blood",
  techniques: [
    {
      name: "Verse I: Blood Brand",
      level: 1,
      effect: "Marks enemy to take 20% increased damage for 10 seconds",
      requirements: {qi: 2500},
      cooldown: 15
    },
    {
      name: "Verse II: Crimson Draw",
      effect: "Restores 15% of damage dealt as health for 5 seconds",
      requirements: { qi: 4000, vit: 800},
      cooldown: 30,
      level: 1
    },
    {
      name: "Verse III: Sanguine Flood",
      effect: "Unleashes a wave of blood slashes that hit all enemies in front",
      requirements: { qi: 6000, spi: 1200 },
      cooldown: 20,
      level: 1
    },
    {
      name: "Verse IV: Blade of Ancestral Woe",
      effect: "Summons phantom blades for a 6-hit combo (true damage)",
      requirements: { qi: 10000, level: 15, },
      cooldown: 18,
      level: 1
    },
    {
      name: "Verse V: Self-Sacrifice",
      effect: "Sacrifice 30% HP to massively boost damage for 10 seconds",
      requirements: { qi: 8000, level: 14 },
      cooldown: 19,
      level: 1
    }
  ]
},
"Mistress Yeon Hwa": {
  tooltip: "Snow-Falling Blossoms: The Veiled Lotus Sword Art",
  description: "Lotus Veil Style",
  styleType: "Agile / Illusion",
  signatureMove: "Petal Mirage Waltz",
  element: "Wind",
  techniques: [
    {
      name: "Veil Step",
      effect: "Evade the next attack completely, reappear behind enemy",
      requirements: { qi: 2000},
      level: 1,
      cooldown: 30

    },
    {
      name: "Blossom Feint",
      effect: "Creates an illusion to confuse enemy for 3 seconds",
      requirements: { qi: 3500, level: 7 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Floating Petal Slash",
      effect: "Spin in a circle, striking all enemies nearby",
      requirements: { qi: 4500, level: 10 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Petal Mirage Waltz",
      effect: "Rapid multi-strike causing bleed over time",
      requirements: { qi: 8000, level: 13, mastery: "Lotus Veil" },
      cooldown: 19,
      level: 1
    },
    {
      name: "Windflower Escape",
      effect: "Instantly teleport to a nearby ally or location",
      requirements: { qi: 5000, level: 11 },
      cooldown: 19,
      level: 1
    }
  ]
},
"Master Jin Rok": {
  tooltip: "Fangs of the Celestial Wolf: Heaven-Piercing Sword Path",
  description: "Heaven-Piercing Fang",
  styleType: "Brute Force / Berserker",
  signatureMove: "Crimson Sky Rend",
  element: "Fire",
  techniques: [
    {
      name: "Wolf Fang Lunge",
      effect: "Quick lunge that knocks the enemy back and stuns for 1s",
      requirements: { qi: 3000, level: 6 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Burning Howl",
      effect: "Increase attack speed and damage by 20% for 8 seconds",
      requirements: { qi: 4500, level: 9 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Molten Fang Barrage",
      effect: "3 rapid heavy slashes, each with fire burst AoE",
      requirements: { qi: 6500, level: 12 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Crimson Sky Rend",
      effect: "Massive vertical slash sends a flaming wolf shockwave",
      requirements: { qi: 11000, level: 15, mastery: "Heaven-Piercing Fang" },
      cooldown: 19,
      level: 1
    },
    {
      name: "Last Fang Reversal",
      effect: "If below 25% HP, deal critical damage and restore 30% HP",
      requirements: { qi: 9000, level: 14 },
      cooldown: 19,
      level: 1
    }
  ]
},
"Elder Bai Yun": {
  tooltip: "River of Passing Souls: Flowing Requiem Sword Dance",
  description: "Flowing Requiem",
  styleType: "Defensive / Counter",
  signatureMove: "Silent Tomb Slash",
  element: "Water",
  techniques: [
    {
      name: "Calm Ripple Guard",
      effect: "Reduces all damage taken by 25% for 5 seconds",
      requirements: { qi: 2000, level: 4 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Ghost Reflection",
      effect: "Reflects the next melee attack back to the attacker",
      requirements: { qi: 4000, level: 8 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Requiem Flow Step",
      effect: "Dodge to the side with a slash, slows enemies hit",
      requirements: { qi: 5000, level: 10 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Silent Tomb Slash",
      effect: "Counterattack that scales with damage received in past 5s",
      requirements: { qi: 9500, level: 14, mastery: "Flowing Requiem" },
      cooldown: 19,
      level: 1
    },
    {
      name: "Soulflow Reversal",
      effect: "If struck while channeling, restore 50% Qi instantly",
      requirements: { qi: 0, level: 12 },
      cooldown: 19,
      level: 1
    }
  ]
},
"Shadow Fang": {
  tooltip: "Moonless Steel Shadows: The Iron Eclipse Style",
  description: "Iron Eclipse",
  styleType: "Stealth / Assassin",
  signatureMove: "Dark Petal Severance",
  element: "Dark",
  techniques: [
    {
      name: "Fade Step",
      effect: "Become untargetable for 2 seconds, reposition",
      requirements: { qi: 2500, level: 5 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Vein Pierce",
      effect: "Aimed thrust dealing 2x damage if from behind",
      requirements: { qi: 3500, level: 8 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Shadow Clone Slash",
      effect: "Attack with a phantom image from another angle",
      requirements: { qi: 5000, level: 11 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Dark Petal Severance",
      effect: "Instantly reappear behind the enemy for a guaranteed critical hit",
      requirements: { qi: 10000, level: 15, mastery: "Iron Eclipse" },
      cooldown: 19,
      level: 1
    },
    {
      name: "Killing Mist",
      effect: "Create a shadow fog that lowers enemy accuracy by 40%",
      requirements: { qi: 4500, level: 9 },
      cooldown: 19,
      level: 1
    }
  ]
},
"Serpent Lord Wei": {
  tooltip: "Nine-Serpent Spiral: The Dragoncoil Sword Technique",
  description: "Dragoncoil Sword",
  styleType: "Control / Disarm",
  signatureMove: "Heaven-Binding Fang",
  element: "Earth",
  techniques: [
    {
      name: "Spiral Catch",
      effect: "Wraps around enemy weapon, reducing their attack damage",
      requirements: { qi: 3000, level: 6 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Coiling Lash",
      effect: "Whiplike sweeping slash that stuns enemies in an arc",
      requirements: { qi: 4000, level: 9 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Burrowed Strike",
      effect: "Temporarily goes underground, emerges behind enemy with a stab",
      requirements: { qi: 5500, level: 11 },
      cooldown: 19,
      level: 1
    },
    {
      name: "Heaven-Binding Fang",
      effect: "Full wrap immobilization; locks enemy in place for 4 seconds",
      requirements: { qi: 9500, level: 15, mastery: "Dragoncoil Sword" },
      cooldown: 19,
      level: 1
    },
    {
      name: "Scale Shield",
      effect: "Form a coiled energy barrier reducing ranged damage",
      requirements: { qi: 6000, level: 12 },
      cooldown: 19,
      level: 1
    }
  ]
}

}
const enemies = [
  {name:"Rogue Cultivator", level:1, hp:30, str:5},
  {name:"Bandit Monk", level:2, hp:50, str:8},
  {name:"Dark Disciple", level:3, hp:80, str:12}
];

// Realm definitions
const realmNames = [
  'Body Tempering','Qi Refining','Foundation Establishment','Core Formation','Golden Core',
  'Nascent Soul','Soul Transformation','Void Core','Spirit Severing','Ascension',
  'Immortal Foundation','Sky Immortal','Celestial Core','Saint Origin','True Deity',
  'Aether Monarch','Chaos Embryo','Primordial Saint','Void Immortal','Endless Paragon'
];

const realmBenefits = {};
const realmBuffs = {};

for (let lvl = 1; lvl <= 100; lvl++) {
  if ((lvl - 1) % 5 === 0 && lvl !== 1) {
    // Every level that starts a new realm (after V): 6, 11, 16, etc.
    const statBonus = lvl * 1.2; // You can tweak this multiplier
    realmBenefits[lvl] = `Breakthrough bonus: +${statBonus.toFixed(1)}% all stats`;
    realmBuffs[lvl] = statBonus / 100;
  } else {
    // Non-breakthrough levels get higher EXP buffs
    const expBonus = lvl * 2;  // e.g. lvl 7 ‚Üí +14% EXP
    realmBenefits[lvl] = `Buff: +${expBonus}% EXP per train`;
    realmBuffs[lvl] = expBonus / 100;
  }
}
 
const tiers = [
  {range:[0,3],color:'#888'},
  {range:[4,7],color:'#0c6'},
  {range:[8,11],color:'#39f'},
  {range:[12,15],color:'#93f'},
  {range:[16,19],color:'#fc0'}
];

function openCategory(type) {
  document.getElementById('menuOverlay').classList.add('hidden');
  toggleBackdrop(true);

  // Close all overlays first
  document.querySelectorAll('.fullOverlay')
    .forEach(el => el.classList.add('hidden'));

  // Show the correct overlay
  if (type === 'profile') {
    document.getElementById('profileOverlay').classList.remove('hidden');
    showProfileTab('clan');
  } else {
    document.getElementById(type + 'sOverlay').classList.remove('hidden');
    switch(type) {
      case 'technique': renderTechniques(); break;
      case 'weapon':    renderWeapons();    break;
      case 'title':     renderTitles();     break;
    }
  }
}

function closeCategory() {
  document.getElementById('overlayBackdrop').classList.add('hidden');
  document.querySelectorAll('.fullOverlay')
    .forEach(el => el.classList.add('hidden'));
}


// Utility functions
function roman(n){ return ['','I','II','III','IV','V'][n] || ''; }
function totalLevel(){ return data.realmIndex*5 + data.subLevel; }
function getRealmColor(idx){
  for(let t of tiers) if(idx>=t.range[0] && idx<=t.range[1]) return t.color;
  return '#fff';
}

function log(msg) {
  console.log('[LOG]', msg);
}

// 3) Achievements
function unlockAchievement(name, desc) {
  if (!data.achievements[name]) {
    data.achievements[name] = true;
    alert(`üéâ Achievement Unlocked: ${name}\n${desc}`);
    renderAchievements();
  }
}
function renderAchievements() {
  const list = document.getElementById('achievementsList');
  list.innerHTML = '';

  for (let key in data.achievements) {
    if (data.achievements[key]) {
      const li = document.createElement('li');
      li.textContent = `üèÜ ${key}`;
      list.appendChild(li);
    }
  }
  // Auto-select this section when menu opens if desired:
  document.querySelector('[data-section="achievements"]').click();
}

// Helpers for safe DOM writes
function setText(id, text) {
  const el = document.getElementById(id);
  if (el) el.innerText = text;
}
function setTextWithTooltip(id, text, tooltip) {
  const el = document.getElementById(id);
  if (el) {
    el.innerText = text;
    el.dataset.tooltip = tooltip || '';
  }
}
function setTooltip(id, tooltip, text /* optional */) {
  const el = document.getElementById(id);
  if (el) {
    if (text !== undefined) el.innerText = text;
    el.dataset.tooltip = tooltip || '';
  }
}

// Main UI refresher
function updateUI() {
  // Clamp & bounds
  data.qi  = Math.max(0, data.qi);
  data.str = Math.max(0, data.str);
  data.hp  = Math.min(Math.max(0, data.hp), data.maxHp);

  // Achievement hook
  if (data.qi >= 100 && !data.achievements['Amateur']) {
    unlockAchievement('Amateur', 'Reach 100 Qi');
  }

  // HUD: spins, race, clan, teacher
  setText('spinRolls', data.unlimitedSpins ? '‚àû' : data.spins);
  setTextWithTooltip('race', data.race, races[data.race]?.tooltip);
  setTextWithTooltip('clan', data.clan, clans[data.clan]?.tooltip);
  setTextWithTooltip('teacher', data.teacher, teachers[data.teacher]?.tooltip);

  // Potential multiplier
  const potVal = (1 + (data.potential / 100) * 4).toFixed(2);
  const potText = data.potential === 100 ? `${potVal} (max)` : potVal;
  setText('potential', potText);

  // Realm + benefit
  const lvl = totalLevel();
  const realmName = `${realmNames[data.realmIndex]} ${roman(data.subLevel)}`;
  setText('realm', realmName);
  const realmEl = document.getElementById('realm');
  if (realmEl) realmEl.style.color = getRealmColor(data.realmIndex);
  setTooltip('benefit', `Level ${lvl} Benefit`, realmBenefits[lvl]);

  // Core stats
  setText('hp',    Math.floor(data.hp));
  setText('maxHp', data.maxHp);
  setText('qi',    Math.floor(data.qi));
  setText('str',   Math.floor(data.str));
  setText('vit',   data.vit);
  setText('wis',   data.wis);
  setText('luck',  data.luck);
  setText('spi',   data.spi);

  // Equipped gear
  setText('mainEquippedTitle',     data.equippedTitle);
  setText('mainEquippedWeapon',    data.equippedWeapon);
  setText('mainEquippedTechnique', data.equippedTechnique);
  // teacher not shown in main HUD
}

// Spin functions
function rollRace() {
  if (!data.unlimitedSpins && data.spins <= 0) {
    alert('No spins left');
    return;
  }
  if (!data.unlimitedSpins) data.spins--;

  const keys = Object.keys(races);
  const randomRace = keys[Math.floor(Math.random() * keys.length)];
  const selected = races[randomRace];

  data.race = randomRace;
  data.maxHp = Math.round(100 * (selected.hp || 1));
  data.baseHp = Math.round(50 * (selected.hp || 1));
  data.qi = 0; // Reset Qi when rerolling

  updateUI();
}

function rollClan() {
  if (!data.unlimitedSpins && data.spins <= 0) {
    alert('No spins left');
    return;
  }
  if (!data.unlimitedSpins) data.spins--;

  const keys = Object.keys(clans);
  const randomClan = keys[Math.floor(Math.random() * keys.length)];
  const selected = clans[randomClan];

  data.clan = randomClan;
  if (selected.baseHp) data.maxHp = Math.round(selected.baseHp);
  if (selected.baseQiGain) data.baseQiGain = selected.baseQiGain;

  updateUI();
}


// Auto-meditate & auto-train system
let medInterval = null;
let trainInterval = null;

// State flags
data.meditating = false;
data.training    = false;

// Auto‚Äëtick functions
function meditateTick() {
  const lvl = totalLevel();                   // compute realm index √ó5 + subLevel
  const buff = realmBuffs[lvl] || 0;          // e.g. 0.07 for +7%
  const raceQi  = races[data.race]?.qi  || 1; // race modifier
  const potMult = 1 + (data.potential / 100) * 4;
  // base gain = 1, then √ópotential, √órace, √ó(1 + realm buff)
  const gain = 1 * potMult * raceQi * (1 + buff);
  data.qi += gain;
  log(`Meditating... +${gain.toFixed(1)} Qi (${(buff*100).toFixed(0)}% realm buff)`);
  updateUI();
}

function trainTick() {
  if (data.hp < data.maxHp * 0.01) {
    alert("Need at least 1% HP to train");
    stopTraining();
    return;
  }
  if (data.qi <= 0) return;

  data.qi --;  // consume Qi

  const lvl      = totalLevel();
  const buff     = realmBuffs[lvl] || 0;
  const potMult  = 1 + (data.potential / 100) * 4;
  const raceStr  = races[data.race]?.str || 1;
  const clanExp  = clans[data.clan]?.exp || 1;

  // Strength gain: base 2 √ó potential √ó race modifier
  const strGain = 2 * potMult * raceStr * (1 + (lvl % 5 === 0 ? buff : 0));
  data.str += strGain;

  data.hp -= data.maxHp * 0.05;  // training costs HP

  updateUI();
}

// Helpers to stop each
function stopMeditating() {
  clearInterval(medInterval);
  medInterval = null;
  data.meditating = false;
}
function stopTraining() {
  clearInterval(trainInterval);
  trainInterval = null;
  data.training = false;
}

// Toggle Meditate
function meditate() {
  if (data.inFight) {data.meditating = false; return}                          // never in fight
  if (data.meditating) stopMeditating();      // already on ‚Üí turn off
  
  // switch if already training and not admin
  if (data.training && !data.unlimitedSpins) stopTraining();
  
  // start meditating
  data.meditating = true;
  medInterval = setInterval(meditateTick, 700);
}

function calcQiGain() {
  return Math.floor(1 * (1 + data.wis * 0.02));
}

function calcStrGain() {
  return 1 + Math.floor(data.wis / 10); // smarter people train more efficiently
}


// Toggle Train
function train() {
  if (data.inFight) {data.training = false; return}                         // never in fight
  if (data.training) stopTraining();          // already on ‚Üí turn off
  
  // switch if already meditating and not admin
  if (data.meditating && !data.unlimitedSpins) stopMeditating();
  
  // start training
  data.training = true;
  trainInterval = setInterval(trainTick, 1000);
}


// 5) Cultivation breakthrough ‚Äî apply realmColor immediately
function breakthrough() {
  if(realmIndex == 19)
  {
    return;
  }
  if (data.subLevel < 5) {
    data.subLevel++;
  } else {
    data.subLevel = 1;
    if (data.realmIndex < realmNames.length - 1) {
      data.realmIndex++;
    }
  }
  // Optionally award a spin
  data.spins++;
  alert(`‚ö° Advanced to ${realmNames[data.realmIndex]} ${roman(data.subLevel)}!`);
  updateUI();
}

function breakthroughReq(realmIndex, subLevel) {
  const baseQi = 20 + realmIndex * 10 + subLevel * 5;
  const baseStr = 10 + realmIndex * 8 + subLevel * 3;
  return { qi: baseQi, str: baseStr };
}

// Call updateUI() once at startup
updateUI();

// Fight system
function enterFight() {
  // 1) Hide your main UI
  document.getElementById('main').classList.add('hidden');
  document.getElementById('footer').classList.add('hidden');

  // 2) Show the battle canvas
  document.getElementById('battleCanvas').classList.remove('hidden');

  // 3) Kick off Three.js battle setup
  initBattleScene();
}

let scene, camera, renderer, playerMesh, enemyMesh, lastAttackTime;

function initBattleScene() {
  const canvas = document.getElementById('battleCanvas');
  renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);

  scene = new THREE.Scene();
  camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
  camera.position.set(0, 5, 10);

  scene.add(new THREE.AmbientLight(0xffffff, 0.6));
  const dlight = new THREE.DirectionalLight(0xffffff, 0.8);
  dlight.position.set(5, 10, 7);
  scene.add(dlight);

  const plane = new THREE.Mesh(
    new THREE.PlaneGeometry(20, 20),
    new THREE.MeshStandardMaterial({ color: 0x222222 })
  );
  plane.rotation.x = -Math.PI / 2;
  scene.add(plane);

  // Enemy box placeholder
  enemyMesh = new THREE.Mesh(
    new THREE.BoxGeometry(1.2, 2.4, 1.2),
    new THREE.MeshStandardMaterial({ color: 0xff0000 })
  );
  enemyMesh.position.set(2, 1, 0);
  scene.add(enemyMesh);

  data.battle = {
    playerHp: data.hp,
    playerMax: data.maxHp,
    enemyHp: data.currentEnemy?.hp || 100,
    enemyMax: data.currentEnemy?.hp || 100
  };

  // üëâ Only start battleLoop *after* loading player GLB
  const loader = new THREE.GLTFLoader();
  
  loader.load(
    'idle.glb',
    gltf => {
      playerMesh = gltf.scene;
      playerMesh.scale.set(1, 1, 1);
      playerMesh.position.set(-2, 0, 0);
      scene.add(playerMesh);

      // Optional animation mixer
      mixer = new THREE.AnimationMixer(playerMesh);
      gltf.animations.forEach(clip => mixer.clipAction(clip).play());

      lastAttackTime = performance.now();
      requestAnimationFrame(battleLoop); // ‚úÖ NOW start the loop
    },
    undefined,
    err => console.error('GLTF load error:', err)
  );
}

function battleLoop(now) {
  const delta = now - lastAttackTime;

  // 1) Enemy auto‚Äëattack every 1s
  if (delta >= 1000) {
    damageEnemy();
    damagePlayer();
    lastAttackTime = now;
  }

  // 2) Render scene
  renderer.render(scene, camera);

  // 3) Continue until someone dies
  if (data.battle.playerHp > 0 && data.battle.enemyHp > 0) {
    requestAnimationFrame(battleLoop);
  } else {
    endBattle();
  }
}
function damageEnemy() {
  const dmg = Math.floor(data.str * (1 + data.potential/100*4));
  data.battle.enemyHp = Math.max(0, data.battle.enemyHp - dmg);
  showFloatingText(enemyMesh.position, `-${dmg}`, 0xff0000);
}

function damagePlayer() {
  // enemy.str from your data.currentEnemy
  const edmg = data.currentEnemy.str;
  data.battle.playerHp = Math.max(0, data.battle.playerHp - edmg);
  showFloatingText(playerMesh.position, `-${edmg}`, 0xffffff);
}
function endBattle() {
  // hide canvas
  document.getElementById('battleCanvas').classList.add('hidden');
  // restore main UI
  document.getElementById('main').classList.remove('hidden');
  document.getElementById('footer').classList.remove('hidden');

  // apply rewards / death logic
  if (data.battle.enemyHp === 0) {
    // victory: loot + EXP
  } else {
    // player died: reload or penalty
  }
}

// HP regen
setInterval(()=>{
  if(data.inFight)return;
  if(data.hp < data.maxHp){
    data.hp += data.maxHp * 0.05;
    if(data.hp > data.maxHp) data.hp = data.maxHp;
    updateUI();
  }
},2500);

//import/export logic
function exportSave() {
  const encoded = btoa(JSON.stringify(data));
  document.getElementById('configData').value = encoded;
}
function importSave() {
  stopMeditating();
  stopTraining();
  try {
    const raw = atob(document.getElementById('configData').value);
    data = JSON.parse(raw);
    updateUI();
    alert("Config Loaded!");
  } catch {
    alert("Invalid Config Data");
  }
  updateUI();
}

// Admin toggle
function toggleAdmin(){
  const pw = prompt('Admin Password:');
  if(pw === 'java'){data.unlimitedSpins=true;alert('Unlimited spins!'); updateUI();}
  else alert('Wrong password');
}

const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('light-theme');
      themeToggle.textContent = document.body.classList.contains('light-theme')
        ? 'Switch to Dark Theme'
        : 'Switch Theme';
    });

// Initialize UI
 document.addEventListener('DOMContentLoaded', () => {
      rollPotential('lesser');
    });
updateUI();
</script>
<script>
// show/hide small menu
function toggleMenu(){
  document.getElementById('menuOverlay').classList.toggle('hidden');
  document.getElementById('overlayBackdrop').classList.toggle('hidden');
}
function closeMenu(){
  document.getElementById('menuOverlay').classList.add('hidden');
  document.getElementById('overlayBackdrop').classList.add('hidden');
}

// open a full‚Äëscreen panel
function openPanel(category) {
  closeMenu();  // hide the small popup
  document.getElementById('overlayBackdrop').classList.remove('hidden');
  document.getElementById(category + 'Overlay').classList.remove('hidden');

  // render its grid contents
  switch(category) {
    case 'techniques': renderTechniques(); break;
    case 'weapons':    renderWeapons();    break;
    case 'titles':     renderTitles();     break;
  }
}

function closePanel(type) {
  document.getElementById(type + 'Overlay').classList.add('hidden');
  toggleBackdrop(false);
}

function toggleBackdrop(show) {
  document.getElementById('overlayBackdrop')
        .classList.toggle('hidden', !show);
}

function showMenuSection(id) {
  // 1) hide everything
  document
    .querySelectorAll('#menuOverlay .menuContent')
    .forEach(sec => sec.classList.add('hidden'));

  // 2) un‚Äëhide the target
  const panel = document.getElementById('menu_' + id);
  if (!panel) return;
  panel.classList.remove('hidden');

  // 3) render its contents on demand
  switch(id) {
    case 'achievements': renderAchievements(); break;
    case 'techniques':   renderTechniques();   break;
    case 'weapons':      renderWeapons();      break;
    case 'foods':        renderFoods();        break;
    case 'titles':       renderTitles();       break;
    case 'items':        renderItems();        break;
    case 'crafting':     renderCrafting();     break;
  }
}

// kick it off on load
document.addEventListener('DOMContentLoaded', () => {
  showMenuSection('achievements');
});

function renderTechniques() {
  const grid = document.getElementById('techniquesGrid');
  grid.innerHTML = '';
  data.unlockedTechniques.forEach(tc => {
    const tile = document.createElement('div');
    tile.className = 'tile';
    tile.innerHTML = `
      <img src="${tc.img}" alt="${tc.name}">
      <div>${tc.name}</div>
      <button>Equip</button>
    `;
    tile.querySelector('button').onclick = () => {
      data.equippedTechnique = tc.name;
      console.log('>> EQUIP TECH:', data.equippedTechnique);
      updateUI();            // now refresh everything
      closePanel('techniques');
    };
    grid.appendChild(tile);
  });
}

function renderWeapons() {
  const grid = document.getElementById('weaponsGrid');
  grid.innerHTML = '';
  data.unlockedWeapons.forEach(w => {
    const tile = document.createElement('div');
    tile.className = 'tile';
    tile.innerHTML = `
      <img src="${w.img}" alt="${w.name}">
      <div>${w.name}</div>
      <button>Equip</button>
    `;
    tile.querySelector('button').onclick = () => {
      data.equippedWeapon = w.name; 
      updateUI();
      closePanel('weapons');
    };
    grid.appendChild(tile);
  });
}

function renderTitles() {
  const grid = document.getElementById('titlesGrid');
  grid.innerHTML = '';
  data.unlockedTitles.forEach(t => {
    const tile = document.createElement('div');
    tile.className = 'tile';
    tile.innerHTML = `
      <img src="${t.img}" alt="${t.name}">
      <div>${t.name}</div>
      <button>Equip</button>
    `;
    tile.querySelector('button').onclick = () => {
      data.equippedTitle = t.name;
      updateUI();
      closePanel('titles');
    };
    grid.appendChild(tile);
  });
}
// And similarly for foods, items‚Ä¶

// FOODS
function renderFoods() {
  const list = document.getElementById('foodList');
  list.innerHTML = '';
  Object.entries(data.inventory)
    .filter(([item]) => ['Meat','Hide','Berry','Pill'].some(k=> item.includes(k)))
    .forEach(([item,qty]) => {
      const li = document.createElement('li');
      li.innerHTML = `${item} x${qty}
        <button style="float:right;" onclick="consumeFood('${item}')">Eat</button>`;
      list.appendChild(li);
    });
}
function consumeFood(item) {
  if (!data.inventory[item]) return;
  // example: +HP = 20
  data.hp = Math.min(data.maxHp, data.hp + 20);
  data.inventory[item]--;
  if (data.inventory[item] === 0) delete data.inventory[item];
  updateUI();
  renderFoods();
}


// ITEMS
function renderItems() {
  const list = document.getElementById('itemList');
  list.innerHTML = '';
  Object.entries(data.inventory)
    .filter(([item]) => 
       !item.includes('Sword') && !item.includes('Meat') && !Object.keys(data.titles).includes(item)
       && !Object.keys(data.techniques).includes(item)
    )
    .forEach(([item,qty]) => {
      const li = document.createElement('li');
      li.textContent = `${item} x${qty}`;
      list.appendChild(li);
    });
}

// CRAFTING
let craftOptions = ['Iron Ingot', 'Health Potion']; // example
let craftRecipes = {
  'Iron Ingot': { 'Iron Ore': 3 },
  'Health Potion': { 'Herb': 2, 'Water': 1 }
};
function renderCrafting() {
  // populate nothing by default
  document.getElementById('selectedCraftItem').innerText = 'None';
  document.getElementById('craftRequirements').innerHTML = '';
}
function showCraftOptions() {
  const choice = prompt('Craft what? ' + craftOptions.join(', '));
  if (!craftOptions.includes(choice)) return alert('Invalid choice');
  document.getElementById('selectedCraftItem').innerText = choice;
  // show requirements
  const reqs = craftRecipes[choice];
  const container = document.getElementById('craftRequirements');
  container.innerHTML = '';
  Object.entries(reqs).forEach(([mat, amt]) => {
    const have = data.inventory[mat] || 0;
    const p = document.createElement('p');
    p.textContent = `${mat}: ${have}/${amt}`;
    container.appendChild(p);
  });
}
function attemptCraft() {
  const choice = document.getElementById('selectedCraftItem').innerText;
  if (!craftRecipes[choice]) return;
  const reqs = craftRecipes[choice];
  // check
  for (let mat in reqs) {
    if ((data.inventory[mat] || 0) < reqs[mat]) {
      return alert('Missing materials');
    }
  }
  // consume
  for (let mat in reqs) data.inventory[mat] -= reqs[mat];
  data.inventory[choice] = (data.inventory[choice] || 0) + 1;
  alert(`Crafted: ${choice}`);
  updateUI();
  showCraftOptions(); // re-render reqs
}

// 4) On page load, hide everything except Achievements
document.addEventListener('DOMContentLoaded', () => {
  const overlay = document.getElementById('menuOverlay');
  overlay.classList.add('hidden');
  document.querySelectorAll('.menuContent').forEach(sec => sec.style.display = 'none');
});

function showProfileTab(type) {
  const el = document.getElementById("profileContent");
  el.innerHTML = "";

  if (type === 'clan' && data.clan && clans[data.clan]) {
    const clan = clans[data.clan];
    el.innerHTML = `
      <h3>${data.clan}</h3>
      <img src="${clan.img}" alt="${data.clan} logo">
      <p><strong>Tier:</strong> ${clan.class}</p>
      <p>${clan.tooltip}</p>
      <h4>Traits:</h4>
      ${clan.traits.map(t => `<div class='profileTrait'>‚Ä¢ ${t}</div>`).join('')}
    `;
  } else if (type === 'race' && data.race && races[data.race]) {
    const race = races[data.race];
    el.innerHTML = `
      <h3>${data.race}</h3>
      <img src="${race.img}" alt="${data.race} icon">
      <p><strong>Tier:</strong> ${race.class}</p>
      <p>${race.tooltip}</p>
      <h4>Traits:</h4>
      ${race.traits.map(t => `<div class='profileTrait'>‚Ä¢ ${t}</div>`).join('')}
    `;
  } else if (type === 'teacher' && data.teacher && teachers[data.teacher]) {
    const t = teachers[data.teacher];
    el.innerHTML = `
      <h3>${data.teacher}</h3>
      <p><strong>Style:</strong> ${t.description}</p>
      <p><strong>Type:</strong> ${t.styleType}</p>
      <p><strong>Element:</strong> ${t.element}</p>
      <p><strong>Signature Move:</strong> ${t.signatureMove}</p>
      <h4>Techniques:</h4>
      <div class='tech-list'>
        ${t.techniques.map(tech=>
          `<div class='profileTrait'>üî∏ ${tech.name} (Lvl req: ${tech.requirements.level})</div>`
        ).join('')}
      </div>
    `;
  } else {
    el.innerHTML = `<p style='text-align:center;color:#AAA;'>No ${type} equipped.</p>`;
  }
}

</script>
<script src="https://cdn.jsdelivr.net/npm/three@0.149.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/js/loaders/GLTFLoader.js"></script>
</body>
</html>
