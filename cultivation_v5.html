<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BioLog Terminal v5.0</title>
  <link rel="icon" href="website_logo.ico" type="image/x-icon">
  <style>
    
    :root {
      /* Dark‚Äëgreen theme colors */
      --bg: #000;
      --fg: #0f0;
      --panel-bg: #111;
      --btn-bg: #111;
      --btn-hover: #222;
      --border: #0f0;
    }
    .light-theme {
      /* White theme overrides */
      --bg: #fff;
      --fg: #000;
      --panel-bg: #f4f4f4;
      --btn-bg: #eee;
      --btn-hover: #ddd;
      --border: #000;
    }
    body {
      background: var(--bg);
      color: var(--fg);
      font-family: monospace;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    #main {
      flex: 1;
      width: 90%;
      max-width: 1000px;
      margin: auto;
      display: grid;
      grid-template-columns: 1fr 300px;
      grid-gap: 20px;
      padding: 20px;
      box-sizing: border-box;
    }
    h2 {
      grid-column: 1 / -1;
      text-align: center;
      font-size: 2em;
      margin-bottom: 10px;
    }
    .section {
      background: var(--panel-bg);
      border: 1px solid var(--border);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    button {
      background: var(--btn-bg);
      color: var(--fg);
      border: 1px solid var(--border);
      padding: 12px 24px;
      margin: 8px 4px 4px 0;
      font-size: 1em;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover { background: var(--btn-hover); }
    #portrait img {
      width: 100%;
      max-width: 250px;
      border: 1px solid var(--border);
      border-radius: 6px;
      margin-bottom: 10px;
    }
    #enemySection {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.9);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    /* ... sparring overlay styles unchanged ... */
    #themeToggle {
      grid-column: 1 / -1;
      justify-self: center;
      margin-bottom: 20px;
    }
    #arenaBackdrop {
      background: #111;
      border: 2px solid #0f0;
      padding: 20px;
      width: 80%;
      max-width: 700px;
      text-align: center;
      border-radius: 8px;
      position: relative;
    }
    #enemyImg {
      max-width: 150px;
      margin-bottom: 10px;
    }
    #enemyInfo h3 {
      font-size: 1.4em;
      margin: 8px 0;
    }
    #enemyHpBar {
      width: 100%;
      height: 20px;
      background: #333;
      border: 1px solid #0f0;
      margin-bottom: 10px;
    }
    #enemyHpFill {
      height: 100%;
      background: #f00;
      width: 100%;
      transition: width 0.3s ease;
    }
    #fightNotify {
      color: #ff0;
      font-size: 1.2em;
      min-height: 30px;
      margin-bottom: 15px;
    }
    #fightActions button {
      padding: 12px 28px;
      font-size: 1em;
      margin: 0 10px;
    }
  </style>
</head>
<body>
  <div id="main">
    <h2>BioLog Terminal Interface v5.0</h2>
    <button id="themeToggle">Switch Theme</button>
  </div>
    <!-- Left column: Stats & Rolls -->
    <div>
      <div class="section">
          <p>üé≤ Spins: <span id="spinRolls">3</span></p>
          <button onclick="rollRace()">Roll Race</button>
          <button onclick="rollClan()">Roll Clan</button>
          <button onclick="rollPotential()">Roll Potential</button>
        </div>
      <div class="section">
        <strong>Race:</strong> <span id="race">‚Äì</span><br>
        <strong>Clan:</strong> <span id="clan">‚Äì</span><br>
        <strong>Potential Mult:</strong> <span id="potential">1</span>x
      </div>
      <div class="section">
        <strong>Realm:</strong> <span id="stage">Body Tempering</span><br>
        <strong>Benefit:</strong> <span id="benefit">‚Äì</span>
      </div>
      <div class="section">
          <strong>Realm:</strong> <span id="realm"></span><br>
          <strong>Benefit:</strong> <span id="benefit" class="tooltip" data-tooltip=""></span><br>
          <strong>HP:</strong> <span id="hp"></span>/<span id="maxHp"></span><br>
          <strong>Qi:</strong> <span id="qi"></span><br>
          <strong>STR:</strong> <span id="str"></span><br>
          <strong>EXP:</strong> <span id="exp"></span>
        </div>
        
        <!-- Right column: Portrait & Actions -->
        <div id="portrait">
          <img src="dormant_person.png" alt="Cultivator Portrait" style="width:100%; height:auto;">
          <div id="actionButtons">
            <button onclick="meditate()">Meditate</button>
            <button onclick="train()">Train</button>
            <button onclick="breakthrough()">Breakthrough</button>
            <button onclick="enterFight()">Fight</button>
          </div>
        </div>
      <div class="section" id="inventory">
        <strong>Inventory:</strong>
        <ul id="invList"></ul>
      </div>
    </div>
  </div>

  <!-- Arena overlay: sits on top when active -->
  <div id="enemySection" class="hidden">
    <div id="arenaBackdrop">
      <h3>üõ°Ô∏è Arena</h3>
      <img id="enemyImg" src="enemy.png" alt="Enemy" />
      <div id="enemyInfo">
        <h3 id="enemyName"></h3>
        <div id="enemyHpBar"><div id="enemyHpFill"></div></div>
      </div>
      <div id="fightNotify"></div>
      <div id="fightActions">
        <button id="attackBtn" onclick="attack()">Attack</button>
        <button id="leaveBtn"  onclick="leaveFight()">Flee</button>
      </div>
    </div>
  </div>

  <button onclick="toggleAdmin()" style="position: fixed; bottom: 10px; right: 10px;">Toggle Admin</button>
  
<script>
// Data model
let data = {
  qi: 0, str: 0, exp: 0,
  hp: 100, maxHp: 100,
  race: "", clan: "", potential: 1,
  spins: 3, unlimitedSpins: false,
  inFight: false, xpMulti: 1, 
  realmIndex: 0, subLevel: 1, meditating: false,
  training: false
};

// Races and clans
const races = {
  "Human": { tooltip: "Balanced.", str:1, qi:1 },
  "Dragonkin": { tooltip:"+STR gain, -Qi regen", str:1.2, qi:0.8 },
  "Phantom": { tooltip:"+Qi regen, -HP", qi:1.3, hp:0.85 },
  "Beastkin": { tooltip:"+HP & STR, slower Qi gain", hp:1.2, str:1.2, qi:0.8 }
};
const clans = {
  "Sun Clan": { tooltip:"+20% EXP gain", exp:1.2 },
  "Ice Vein": { tooltip:"Auto heal 1 HP every 10s" },
  "Thunder Hall": { tooltip:"+10% Crit chance", crit:0.1 },
  "Jade Root": { tooltip:"+20% Loot Quality", loot:1.2 }
};
const enemies = [
  {name:"Rogue Cultivator", level:1, hp:30, str:5},
  {name:"Bandit Monk", level:2, hp:50, str:8},
  {name:"Dark Disciple", level:3, hp:80, str:12}
];

// Realm definitions
const realmNames = [
  'Body Tempering','Qi Refining','Foundation Establishment','Core Formation','Golden Core',
  'Nascent Soul','Soul Transformation','Void Core','Spirit Severing','Ascension',
  'Immortal Foundation','Sky Immortal','Celestial Core','Saint Origin','True Deity',
  'Aether Monarch','Chaos Embryo','Primordial Saint','Void Immortal','Endless Paragon'
];
const realmBenefits = {};
for(let lvl=1; lvl<=100; lvl++){
  realmBenefits[lvl] = (lvl % 5 === 0)
    ? `Breakthrough bonus: +${(lvl/5)*2}% all stats`
    : `Buff: +${lvl}% EXP per train`;
}
const tiers = [
  {range:[0,3],color:'#888'},
  {range:[4,7],color:'#0c6'},
  {range:[8,11],color:'#39f'},
  {range:[12,15],color:'#93f'},
  {range:[16,19],color:'#fc0'}
];

// Utility functions
function roman(n){ return ['','I','II','III','IV'][n] || ''; }
function totalLevel(){ return data.realmIndex*5 + data.subLevel; }
function getRealmColor(idx){
  for(let t of tiers) if(idx>=t.range[0] && idx<=t.range[1]) return t.color;
  return '#fff';
}

// Update UI
function updateUI()
{   
  if(data.qi < 0){data.qi = 0}
  if(data.str < 0){data.str = 0}
  
  document.getElementById('spinRolls').innerText = data.unlimitedSpins?'‚àû':data.spins;
  document.getElementById('race').innerText = data.race;
  document.getElementById('race').dataset.tooltip = races[data.race]?.tooltip || '';
  document.getElementById('clan').innerText = data.clan;
  document.getElementById('clan').dataset.tooltip = clans[data.clan]?.tooltip || '';
  document.getElementById('potential').innerText = (1 + (data.potential/100)*4).toFixed(2);

  const realmText = realmNames[data.realmIndex] + ' ' + roman(data.subLevel);
  document.getElementById('realm').innerText = realmText;
  const lvl = totalLevel();
  document.getElementById('benefit').innerText = realmBenefits[lvl];
  document.getElementById('benefit').dataset.tooltip = `Level ${lvl} Benefit`;

  document.getElementById('hp').innerText = Math.floor(data.hp);
  document.getElementById('maxHp').innerText = data.maxHp;
  document.getElementById('qi').innerText = Math.floor(data.qi);
  document.getElementById('str').innerText = Math.floor(data.str);
  document.getElementById('exp').innerText = Math.floor(data.exp);

  const inv = Object.entries(data.inventory || {}).map(([k,v])=>k+':'+v).join(' | ');
  document.getElementById('inventory').innerText = 'Inventory: ' + inv;

}

// Spin functions
function rollRace(){
  if(!data.unlimitedSpins && data.spins<=0){alert('No spins left');return;}
  if(!data.unlimitedSpins) data.spins--;
  const keys = Object.keys(races);
  data.race = keys[Math.floor(Math.random()*keys.length)];
  if(races[data.race].hp) data.maxHp = 100 * races[data.race].hp;
  updateUI();
}
function rollClan(){
  if(!data.unlimitedSpins && data.spins<=0){alert('No spins left');return;}
  if(!data.unlimitedSpins) data.spins--;
  const keys = Object.keys(clans);
  data.clan = keys[Math.floor(Math.random()*keys.length)];
  updateUI();
}
function rollPotential(){
  if(!data.unlimitedSpins && data.spins<=0){alert('No spins left');return;}
  if(!data.unlimitedSpins) data.spins--;
  data.potential = Math.floor(Math.random()*100)+1;
  updateUI();
}

// Auto-meditate & auto-train system
let medInterval = null;
let trainInterval = null;

// State flags
data.meditating = false;
data.training    = false;

// Auto‚Äëtick functions
function meditateTick() {
  const mult = (1 + (data.potential / 100) * 4) * (races[data.race]?.qi || 1);
  data.qi += mult;
  updateUI();
}

function trainTick() {
  if (data.hp < data.maxHp * 0.01) {
    alert("Need at least 1% HP to train");
    stopTraining();
    return;
  }
  if (data.qi <= 0) return;
  data.qi--;
  const pm = (1 + (data.potential / 100) * 4);
  data.str += pm * (races[data.race]?.str || 1);
  data.exp += pm * (clans[data.clan]?.exp || 1);
  data.hp -= 2;
  updateUI();
}

// Helpers to stop each
function stopMeditating() {
  clearInterval(medInterval);
  medInterval = null;
  data.meditating = false;
}
function stopTraining() {
  clearInterval(trainInterval);
  trainInterval = null;
  data.training = false;
}

// Toggle Meditate
function meditate() {
  if (data.inFight) {data.meditating = false; return}                          // never in fight
  if (data.meditating) stopMeditating();      // already on ‚Üí turn off
  
  // switch if already training and not admin
  if (data.training && !data.unlimitedSpins) stopTraining();
  
  // start meditating
  data.meditating = true;
  medInterval = setInterval(meditateTick, 700);
}

// Toggle Train
function train() {
  if (data.inFight) {data.training = false; return}                         // never in fight
  if (data.training) stopTraining();          // already on ‚Üí turn off
  
  // switch if already meditating and not admin
  if (data.meditating && !data.unlimitedSpins) stopMeditating();
  
  // start training
  data.training = true;
  trainInterval = setInterval(trainTick, 1000);
}


// Breakthrough
function breakthrough(){
  if(data.exp < 100){alert('Need 100 EXP'); return;}
  data.exp -= 100;
  if(data.subLevel < 5) data.subLevel++;
  else {data.subLevel=1; if(data.realmIndex<19) data.realmIndex++;}
  data.realmColor = getRealmColor(data.realmIndex);
  alert('Advanced to ' + realmNames[data.realmIndex] + ' ' + roman(data.subLevel));
  updateUI();
}

// Fight system
function enterFight(){
  data.inFight = true;
  document.body.setAttribute('data-infight','true');
  clearInterval(medInterval); clearInterval(trainInterval);
  
  const enemy = {...enemies[Math.floor(Math.random()*enemies.length)]};
  data.currentEnemy = enemy;
  
  // Populate UI
  document.getElementById('enemyName').innerText = `${enemy.name} (Lv${enemy.level})`;
  document.getElementById('enemyHpFill').style.width = '100%';
  document.getElementById('fightNotify').innerText = '';
  
  document.getElementById('enemySection').classList.remove('hidden');
}

function attack(){
  const enemy = data.currentEnemy;
  const dmg = Math.floor(data.str * (1 + (data.potential/100)*4));
  enemy.hp -= dmg;
  
  // Show hit
  document.getElementById('fightNotify').innerText = `You strike for ${dmg}!`;
  
  // Update enemy HP bar
  const pct = Math.max(0, enemy.hp / enemies[0].hp * 100);
  document.getElementById('enemyHpFill').style.width = pct + '%';
  
  if(enemy.hp > 0){
    // Enemy attacks back
    setTimeout(()=>{
      data.hp -= enemy.str;
      document.getElementById('fightNotify').innerText = 
        `Enemy hits you for ${enemy.str}!`;
      updateUI();
      if(data.hp <= 0){
        document.getElementById('fightNotify').innerText = 'üíÄ You have fallen...';
        // end game or reload after a delay
        setTimeout(()=> location.reload(), 1500);
      }
    }, 500);
  } else {
    // Victory sequence
    document.getElementById('fightNotify').innerText = '‚ú® Enemy defeated!';
    data.exp += 20 * (clans[data.clan]?.exp || 1);
    updateUI();
    setTimeout(leaveFight, 1000);
  }
}

function leaveFight(){
  data.inFight = false;
  document.body.removeAttribute('data-infight');
  document.getElementById('enemySection').classList.add('hidden');
  updateUI();
}


// HP regen
setInterval(()=>{
  if(data.hp < data.maxHp){
    data.hp += data.maxHp * 0.05;
    if(data.hp > data.maxHp) data.hp = data.maxHp;
    updateUI();
  }
},1500);

// Admin toggle
function toggleAdmin(){
  const pw = prompt('Admin Password:');
  if(pw === 'java'){data.unlimitedSpins=true;alert('Unlimited spins!'); updateUI();}
  else alert('Wrong password');
}

const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('light-theme');
      themeToggle.textContent = document.body.classList.contains('light-theme')
        ? 'Switch to Dark Theme'
        : 'Switch Theme';
    });
    
// Initialize UI
updateUI();
</script>
</body>
</html>
<!-- """ -->

<!-- file_path = Path("/mnt/data/cultivation_v5.html")
file_path.write_text(html_content)
file_path.name -->
